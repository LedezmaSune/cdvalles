<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Evaluación Benchmark</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #007BFF;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input[type="text"], input[type="date"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .radio-group {
      margin-bottom: 10px;
    }
    .radio-group input {
      margin-right: 8px;
    }
    button {
      margin-top: 25px;
      padding: 12px 25px;
      font-size: 16px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Evaluación Benchmark - Elektra</h2>
  <form id="formulario">

    <label>Nombre del evaluador:</label>
    <input type="text" name="evaluador" required>

    <label>Nombre del vendedor:</label>
    <input type="text" name="vendedor" required>

    <label>Fecha:</label>
    <input type="date" name="fecha" required>

    <!-- Preguntas -->
    <!-- ABORDA -->
    <label>ABORDA 1: Parafraseo y cuadro verbal</label>
    <div class="radio-group">
      <input type="radio" name="aborda1" value="✔" required> ✔
      <input type="radio" name="aborda1" value="X"> ✘
    </div>

    <label>ABORDA 2: Espejeo y proxémica</label>
    <div class="radio-group">
      <input type="radio" name="aborda2" value="✔" required> ✔
      <input type="radio" name="aborda2" value="X"> ✘
    </div>

    <label>ABORDA 3: Centramiento y alineación emocional</label>
    <div class="radio-group">
      <input type="radio" name="aborda3" value="✔" required> ✔
      <input type="radio" name="aborda3" value="X"> ✘
    </div>

    <!-- DESCUBRE -->
    <label>DESCUBRE 1: Preguntas poderosas</label>
    <div class="radio-group">
      <input type="radio" name="descubre1" value="✔" required> ✔
      <input type="radio" name="descubre1" value="X"> ✘
    </div>

    <label>DESCUBRE 2: Valida la información</label>
    <div class="radio-group">
      <input type="radio" name="descubre2" value="✔" required> ✔
      <input type="radio" name="descubre2" value="X"> ✘
    </div>

    <!-- SOLUCIONA -->
    <label>SOLUCIONA 1: Prepara el producto</label>
    <div class="radio-group">
      <input type="radio" name="soluciona1" value="✔" required> ✔
      <input type="radio" name="soluciona1" value="X"> ✘
    </div>

    <label>SOLUCIONA 2: Presenta el producto</label>
    <div class="radio-group">
      <input type="radio" name="soluciona2" value="✔" required> ✔
      <input type="radio" name="soluciona2" value="X"> ✘
    </div>

    <label>SOLUCIONA 3: Invita a probar el producto</label>
    <div class="radio-group">
      <input type="radio" name="soluciona3" value="✔" required> ✔
      <input type="radio" name="soluciona3" value="X"> ✘
    </div>

    <label>SOLUCIONA 4: Realiza pre-cierre</label>
    <div class="radio-group">
      <input type="radio" name="soluciona4" value="✔" required> ✔
      <input type="radio" name="soluciona4" value="X"> ✘
    </div>

    <!-- CIERRA -->
    <label>CIERRA 1: Escucha objeciones</label>
    <div class="radio-group">
      <input type="radio" name="cierra1" value="✔" required> ✔
      <input type="radio" name="cierra1" value="X"> ✘
    </div>

    <label>CIERRA 2: Reformula objeción</label>
    <div class="radio-group">
      <input type="radio" name="cierra2" value="✔" required> ✔
      <input type="radio" name="cierra2" value="X"> ✘
    </div>

    <label>CIERRA 3: Técnica VEB / Mínimos y máximos</label>
    <div class="radio-group">
      <input type="radio" name="cierra3" value="✔" required> ✔
      <input type="radio" name="cierra3" value="X"> ✘
    </div>

    <label>CIERRA 4: Verifica otras inquietudes</label>
    <div class="radio-group">
      <input type="radio" name="cierra4" value="✔" required> ✔
      <input type="radio" name="cierra4" value="X"> ✘
    </div>

    <label>CIERRA 5: Realiza cierre claro</label>
    <div class="radio-group">
      <input type="radio" name="cierra5" value="✔" required> ✔
      <input type="radio" name="cierra5" value="X"> ✘
    </div>

    <!-- ASEGURA -->
    <label>ASEGURA 1: Anclaje emocional</label>
    <div class="radio-group">
      <input type="radio" name="asegura1" value="✔" required> ✔
      <input type="radio" name="asegura1" value="X"> ✘
    </div>

    <label>ASEGURA 2: Facilita el pago</label>
    <div class="radio-group">
      <input type="radio" name="asegura2" value="✔" required> ✔
      <input type="radio" name="asegura2" value="X"> ✘
    </div>

    <button type="submit">Enviar y Generar PDF</button>
  </form>
</div>

<script>
  const form = document.getElementById("formulario");
  const scriptURL = "URL_DE_TU_WEBAPP"; // Reemplaza con la URL de tu Web App

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    // Validación: si algún campo no está marcado, no continúa
    if (!form.checkValidity()) {
      alert("⚠️ Por favor responde todas las preguntas.");
      return;
    }

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    // Enviar a Google Sheets
    try {
      await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
      });
      alert("✅ Evaluación enviada correctamente a Google Sheets");
    } catch (error) {
      alert("❌ Error al enviar a Google Sheets");
      return;
    }

    // Generar PDF
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let y = 10;

    doc.setFontSize(14);
    doc.text("Evaluación Benchmark - Elektra", 10, y); y += 10;
    doc.setFontSize(11);
    doc.text("Evaluador: " + data.evaluador, 10, y); y += 6;
    doc.text("Vendedor: " + data.vendedor, 10, y); y += 6;
    doc.text("Fecha: " + data.fecha, 10, y); y += 10;

    for (const [key, value] of Object.entries(data)) {
      if (!["evaluador", "vendedor", "fecha"].includes(key)) {
        doc.text(`${key.toUpperCase()}: ${value}`, 10, y);
        y += 6;
        if (y > 270) { doc.addPage(); y = 10; }
      }
    }

    doc.save(`Evaluacion-${data.vendedor}.pdf`);
    form.reset();
  });
</script>

</body>
</html>
